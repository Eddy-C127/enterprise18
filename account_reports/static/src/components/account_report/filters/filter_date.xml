<?xml version="1.0" encoding="UTF-8" ?>
<templates>
    <t t-name="account_reports.AccountReportFilterDate">
        <Dropdown
            menuClass="'account_report_filter date'"
            onStateChanged="(isOpen) => this.applyFilters(isOpen, 'date')"
        >
            <button class="btn btn-secondary">
                <i class="fa fa-calendar me-1"/>
                <t t-out="controller.options.date.string"/>
            </button>

            <t t-set-slot="content">
                <t t-if="controller.options.date.mode === 'single'">
                    <DropdownItem
                        class="{ 'filter_date_single_today_hook': true, 'selected': (controller.options.date.filter === 'today') }"
                        onSelected="() => this.filterClicked('date.filter', 'today', true)"
                    >
                        Today
                    </DropdownItem>

                    <DropdownItem
                        class="{ 'filter_date_single_last_month_hook': true, 'selected': (controller.options.date.filter === 'last_month') }"
                        onSelected="() => this.filterClicked('date.filter', 'last_month', true)"
                    >
                        End of Last Month
                    </DropdownItem>

                    <DropdownItem
                        class="{ 'filter_date_single_last_quarter_hook': true, 'selected': (controller.options.date.filter === 'last_quarter') }"
                        onSelected="() => this.filterClicked('date.filter', 'last_quarter', true)"
                    >
                        End of Last Quarter
                    </DropdownItem>

                    <DropdownItem
                        class="{ 'filter_date_single_last_year_hook': true, 'selected': (controller.options.date.filter === 'last_year') }"
                        onSelected="() => this.filterClicked('date.filter', 'last_year', true)"
                    >
                        End of Last Financial Year
                    </DropdownItem>
                </t>

                <t t-if="controller.options.date.mode === 'range'">
                    <DropdownItem
                        class="{ 'filter_date_this_month_hook': true, 'selected': (controller.options.date.filter === 'this_month') }"
                        onSelected="() => this.filterClicked('date.filter', 'this_month', true)"
                    >
                        This Month
                    </DropdownItem>

                    <DropdownItem
                        class="{ 'filter_date_this_quarter_hook': true, 'selected': (controller.options.date.filter === 'this_quarter') }"
                        onSelected="() => this.filterClicked('date.filter', 'this_quarter', true)"
                    >
                        This Quarter
                    </DropdownItem>

                    <DropdownItem
                        class="{ 'filter_date_this_year_hook': true, 'selected': (controller.options.date.filter === 'this_year') }"
                        onSelected="() => this.filterClicked('date.filter', 'this_year', true)"
                    >
                        This Financial Year
                    </DropdownItem>

                    <div class="dropdown-divider"/>

                    <DropdownItem
                        class="{ 'filter_date_range_last_month_hook': true, 'selected': (controller.options.date.filter === 'last_month') }"
                        onSelected="() => this.filterClicked('date.filter', 'last_month', true)"
                    >
                        Last Month
                    </DropdownItem>

                    <DropdownItem
                        class="{ 'filter_date_range_last_quarter_hook': true, 'selected': (controller.options.date.filter === 'last_quarter') }"
                        onSelected="() => this.filterClicked('date.filter', 'last_quarter', true)"
                    >
                        Last Quarter
                    </DropdownItem>

                    <DropdownItem
                        class="{ 'filter_date_range_last_year_hook': true, 'selected': (controller.options.date.filter === 'last_year') }"
                        onSelected="() => this.filterClicked('date.filter', 'last_year', true)"
                    >
                        Last Financial Year
                    </DropdownItem>
                </t>

                <div class="dropdown-divider"/>

                <t t-if="controller.options.date.mode === 'range'">
                    <div
                        class="dropdown-item date d-flex flex-row justify-space-between"
                        t-att-class="(controller.options.date.filter === 'custom') ? 'selected' : ''"
                        t-on-click="() => this.filterClicked('date.filter', 'custom')"
                    >
                        <label class="d-flex align-items-center">
                            Custom Dates
                        </label>
                        <div class="d-flex flex-row"
                             t-att-class="(controller.options.date.filter !== 'custom') ? 'invisible' : ''">
                            <DateTimeInput
                                type="'date'"
                                value="dateFrom('date')"
                                onChange="(dateFrom) => this.setDateFrom('date', dateFrom)"
                            />
                            <label class="d-flex align-items-center">
                                to
                            </label>
                            <DateTimeInput
                                type="'date'"
                                value="dateTo('date')"
                                onChange="(dateTo) => this.setDateTo('date', dateTo)"
                            />
                        </div>
                    </div>
                </t>

                <t t-if="controller.options.date.mode === 'single'">
                    <div
                        class="dropdown-item date d-flex flex-row justify-space-between"
                        t-att-class="(controller.options.date.filter === 'custom') ? 'selected' : ''"
                        t-on-click="() => this.filterClicked('date.filter', 'custom')"
                    >
                        <label class="d-flex align-items-center">
                            Specific Date
                        </label>

                        <!-- This div is needed for the 'justify-content_between' on the parent -->
                        <div t-att-class="(controller.options.date.filter !== 'custom') ? 'invisible' : ''">
                            <DateTimeInput
                                type="'date'"
                                value="dateTo('date')"
                                onChange="(dateTo) => this.setDateTo('date', dateTo)"
                            />
                        </div>
                    </div>
                </t>
            </t>
        </Dropdown>
    </t>
</templates>
