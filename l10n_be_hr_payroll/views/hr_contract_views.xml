<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="hr_contract_view_form" model="ir.ui.view">
        <field name="name">hr.contract.form</field>
        <field name="model">hr.contract</field>
        <field name="inherit_id" ref="hr_payroll.hr_contract_form_inherit"/>
        <field name="arch" type="xml">
            <xpath expr="//label[@for='wage']" position="before">
                <label for="time_credit_full_time_wage"
                       attrs="{'invisible': ['|', ('wage_type', '=', 'hourly'), ('time_credit', '=', False)]}"/>
                <div class="o_row" name="time_credit_full_time_wage"
                     attrs="{'invisible': ['|', ('wage_type', '=', 'hourly'), ('time_credit', '=', False)]}">
                    <field name="time_credit_full_time_wage" nolabel="1"/>
                    <span>/ month</span>
                </div>
            </xpath>
            <xpath expr="//label[@for='wage']" position="attributes">
                <attribute name="attrs">{'invisible': [('wage_type', '=', 'hourly')]}</attribute>
            </xpath>
            <xpath expr="//div[@name='wage']" position="attributes">
                <attribute name="attrs">{'invisible': [('wage_type', '=', 'hourly')]}</attribute>
            </xpath>
            <xpath expr="//field[@name='resource_calendar_id']/parent::div" position="after">
                <div colspan="2" class="o_checkbox_optional_field">
                    <label for="time_credit"/>
                    <field name="time_credit"/>
                    <field name="work_time_rate" attrs="{'invisible': [('time_credit', '=', False)]}" widget="percentage"/>
                </div>
                <field name="standard_calendar_id" attrs="{'invisible': [('time_credit', '=', False)]}"/>
                <field name="time_credit_type_id" attrs="{'invisible': [('time_credit', '=', False)]}"/>
            </xpath>
            <xpath expr="//header" position="inside">
                <field name="time_credit" invisible="1"/>
                <button name="%(credit_time_wizard_action)d" string="Part Time"
                        attrs="{'invisible': ['|', ('employee_id', '=', False), ('time_credit', '=', True)]}"
                        type="action" groups="hr_contract.group_hr_contract_manager"/>
                <button name="%(exit_credit_time_wizard_action)d" string="Full Time"
                        attrs="{'invisible': ['|', ('employee_id', '=', False), ('time_credit', '=', False)]}"
                        type="action" groups="hr_contract.group_hr_contract_manager"/>
            </xpath>
            <xpath expr="//group[@name='yearly_advantages']" position="before">
                <group name="monthly_benefits">
                    <label for="commission_on_target" attrs="{'invisible': [('wage_type', '=', 'hourly')]}"/>
                    <div class="o_row" attrs="{'invisible': [('wage_type', '=', 'hourly')]}">
                        <field name="commission_on_target" nolabel="1"/>
                        <span>/ month</span>
                    </div>
                    <label for="representation_fees" attrs="{'invisible': [('wage_type', '=', 'hourly')]}"/>
                    <div class="o_row" attrs="{'invisible': [('wage_type', '=', 'hourly')]}">
                        <field name="representation_fees" nolabel="1"/>
                        <span>/ month</span>
                    </div>
                    <label for="ip" attrs="{'invisible': [('wage_type', '=', 'hourly')]}"/>
                    <div class="o_row">
                        <field name="ip" nolabel="1"
                               attrs="{'invisible': ['|', ('wage_type', '=', 'hourly'), ('ip_wage_rate', '=', 0.0)]}"/>
                        <field name="ip_wage_rate" attrs="{'invisible': [('wage_type', '=', 'hourly')]}"/>
                        <span>%</span>
                    </div>
                    <label for="mobile" attrs="{'invisible': [('wage_type', '=', 'hourly')]}"/>
                    <div class="o_row" attrs="{'invisible': [('wage_type', '=', 'hourly')]}">
                        <field name="mobile" nolabel="1"/>
                        <span>/ month</span>
                    </div>
                    <label for="internet" attrs="{'invisible': [('wage_type', '=', 'hourly')]}"/>
                    <div class="o_row" attrs="{'invisible': [('wage_type', '=', 'hourly')]}">
                        <field name="internet" nolabel="1"/>
                        <span>/ month</span>
                    </div>
                    <field name="has_laptop" attrs="{'invisible': [('wage_type', '=', 'hourly')]}"/>
                </group>
            </xpath>
            <xpath expr="//group[@name='yearly_advantages']" position="inside">
                <label for="meal_voucher_amount"/>
                <div class="o_row">
                    <field name="meal_voucher_amount" nolabel="1"/>
                    <span>/ worked day</span>
                </div>
                <label for="eco_checks"/>
                <div class="o_row">
                    <field name="eco_checks" nolabel="1"/>
                    <span>/ year</span>
                </div>
            </xpath>
            <xpath expr="//group[@name='salary_info']" position="after">
                <group name="transportation" string="Transportation">
                    <group name="transportation_left">
                        <field name="transport_mode_car" attrs="{'invisible': [('wage_type', '=', 'hourly')]}"/>
                        <label for="fuel_card" attrs="{'invisible': [('wage_type', '=', 'hourly')]}"/>
                        <div class="o_row" attrs="{'invisible': [('wage_type', '=', 'hourly')]}" name="fuel_card_div">
                            <field name="fuel_card" nolabel="1"/>
                            <span>/ month</span>
                        </div>
                        <field name="car_atn" widget="monetary" options="{'currency_field': 'currency_id'}"
                               attrs="{'invisible': [('transport_mode_car', '=', False)]}"/>
                    </group>
                    <group name="transportation_right">
                        <field name="transport_mode_train" attrs="{'invisible': [('wage_type', '=', 'hourly')]}"/>
                        <span class="o_form_label"
                              attrs="{'invisible': ['|', ('wage_type', '=', 'hourly'), ('transport_mode_train', '=', False)]}"
                              name="train_transport_label">Train Transport</span>
                        <div attrs="{'invisible': ['|', ('wage_type', '=', 'hourly'), ('transport_mode_train', '=', False)]}"
                             name="train_transport_div">
                            <div>
                                <label for="train_transport_employee_amount" class="oe_inline"/>
                                <field name="train_transport_employee_amount" class="oe_inline"/>
                            </div>
                            <div>
                                <label for="train_transport_reimbursed_amount" class="oe_inline"/>
                                <field name="train_transport_reimbursed_amount" class="oe_inline"/>
                            </div>
                        </div>
                        <field name="transport_mode_public" attrs="{'invisible': [('wage_type', '=', 'hourly')]}"/>
                        <span class="o_form_label"
                              attrs="{'invisible': ['|', ('wage_type', '=', 'hourly'), ('transport_mode_public', '=', False)]}"
                              name="public_transport_label">Other Public Transport</span>
                        <div attrs="{'invisible': ['|', ('wage_type', '=', 'hourly'), ('transport_mode_public', '=', False)]}"
                             name="public_transport_div">
                            <div>
                                <label for="public_transport_employee_amount" class="oe_inline"/>
                                <field name="public_transport_employee_amount" class="oe_inline"/>
                            </div>
                            <div>
                                <label for="public_transport_reimbursed_amount" class="oe_inline"/>
                                <field name="public_transport_reimbursed_amount" class="oe_inline"/>
                            </div>
                        </div>
                        <field name="transport_mode_private_car"/>
                        <span class="o_form_label" groups="hr.group_hr_user"
                              attrs="{'invisible': [('transport_mode_private_car', '=', False)]}">Distance home-work</span>
                        <div class="o_row" groups="hr.group_hr_user"
                             attrs="{'invisible': [('transport_mode_private_car', '=', False)]}">
                            <field name="km_home_work" class="oe_inline"/>
                            <span>km</span>
                        </div>
                        <span class="o_form_label"
                              attrs="{'invisible': [('transport_mode_private_car', '=', False)]}">Reimboursed amount</span>
                        <div class="o_row" attrs="{'invisible': [('transport_mode_private_car', '=', False)]}">
                            <field name="private_car_reimbursed_amount"/>
                            <span>/ month</span>
                        </div>
                    </group>
                </group>
            </xpath>
            <group name="salary_info" position="inside">
                <group string="Posted Employee" name="posted_employee">
                    <field name="no_onss"/>
                    <field name="no_withholding_taxes"/>
                </group>
                <group string="Withholding Taxes Exemption" name="withholding_taxes_exemption">
                    <field name="rd_percentage"/>
                </group>
                <group string="Impulsion Plan" name="impulsion_plan">
                    <field name="l10n_be_impulsion_plan"/>
                </group>
                <group string="ONSS Reduction" name="onss_retructuring">
                    <field name="l10n_be_onss_restructuring"/>
                </group>
            </group>
            <page name="information" position="after">
                <page string="Attachment of Salary" name="salary_attachment">
                    <group>
                        <field name="fiscal_voluntarism" attrs="{'invisible': [('wage_type', '=', 'hourly')]}"/>
                        <label for="fiscal_voluntary_rate"
                               attrs="{'invisible': ['|', ('wage_type', '=', 'hourly'), ('fiscal_voluntarism', '=', False)]}"/>
                        <div class="o_row" attrs="{'invisible': ['|', ('wage_type', '=', 'hourly'), ('fiscal_voluntarism', '=', False)]}">
                            <field name="fiscal_voluntary_rate" nolabel="1"/>
                            <span>%</span>
                        </div>
                        <field name="attachment_salary_ids">
                            <tree editable="bottom">
                                <field name="name"/>
                                <field name="garnished_type"/>
                                <field name="date_from"/>
                                <field name="date_to"/>
                                <field name="amount"/>
                            </tree>
                        </field>
                    </group>
                </page>
            </page>
        </field>
    </record>
</odoo>
