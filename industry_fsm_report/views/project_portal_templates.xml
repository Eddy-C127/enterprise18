<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="portal_my_worksheet" name="My Worksheets" inherit_id="industry_fsm.portal_my_worksheet" primary="True">
        <xpath expr="//div[@id='worksheet_content']" position="replace">
            <!-- worksheet content -->
            <t t-if="task.worksheet_count">
                <div t-attf-class="card p-3" name="Content" id="worksheet_content">
                    <h1>Worksheet Report</h1>
                    <hr/>
                    <t t-set="doc" t-value="task"/>
                    <div t-call="industry_fsm_report.worksheet_custom_page"/>
                </div>
            </t>
            <t t-else="">$0</t>
        </xpath>
    </template>

    <template id="portal_my_task" inherit_id="industry_fsm.portal_my_task">
        <xpath expr="//li[@id='nav-report']" position="attributes">
            <attribute name="t-if">(not task.is_fsm and timesheets and allow_timesheets) or (task.is_fsm and task.allow_worksheets and (task.worksheet_count or task.comment))</attribute>
        </xpath>
        <xpath expr="//a[@t-if='task.is_fsm and task.allow_worksheets and task.comment']" position="attributes">
            <attribute name="t-if">task.is_fsm and task.allow_worksheets and (task.worksheet_count or task.comment)</attribute>
        </xpath>
    </template>

</odoo>
