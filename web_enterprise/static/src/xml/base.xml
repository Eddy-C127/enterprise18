<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

<div t-name="AppSwitcher" class="o_application_switcher">
    <div class="o_apps">
        <t t-foreach="widget.menu_data" t-as="primary_menu">
          <t t-set="action_id" t-value="primary_menu.action ? primary_menu.action.split(',')[1] : ''"/>
          <a
            t-att-class="'o_app' + ((primary_menu.href)? '' : ' o_action_app')"
            t-att-data-menu="primary_menu.id"
            t-att-data-action-model="primary_menu.action ? primary_menu.action.split(',')[0] : ''"
            t-att-data-action-id="action_id"
            t-att-href="primary_menu.href ? primary_menu.href : ('#menu_id='+primary_menu.id+'&amp;action_id='+action_id)">
            <img class="o_app_icon"
                 t-att-src="(primary_menu.web_icon_data)? ('data:image/png;base64,' + primary_menu.web_icon_data) : '/web_enterprise/static/src/img/default_icon_app.png'"/>
            <div class="o_caption"><t t-esc="primary_menu.name"/></div>
          </a>
        </t>
    </div>
    <div class="o_application_switcher_footer">
        <img src="/web_enterprise/static/src/img/odoo.png" alt="Odoo"/>
    </div>
</div>

<div t-name="WebClient.database_expiration_panel">
    <div class="database_expiration_panel" id="announcement_bar_table">
        <div t-attf-class="alert alert-#{diffDays&lt;6?'danger':(diffDays&lt;16?'warning':'info')}" role="alert">
            <a href="#" class="oe_instance_hide_panel pull-right" t-translation="off">&amp;times;</a>
            <span>
                <span class="oe_instance_expires"></span>
                <span class="oe_instance_register">
                    <t t-if="!has_mail">
                        You will be able to register your database once you have installed your first app.
                    </t>
                    <t t-if="has_mail">
                        <t t-if="diffDays == 30">
                            <t t-set="delay">1 month</t>
                        </t>
                        <t t-if="diffDays != 30">
                            <t t-set="delay"><t t-esc="diffDays"/> days</t>
                        </t>
                        <t t-if="diffDays &gt; 0">
                            <t t-if="dbexpiration_reason == 'demo'">
                                This demo database will expire in <span t-esc="delay"/>.
                            </t>
                            <t t-if="dbexpiration_reason != 'demo'">
                                This database will expire in <span t-esc="delay"/>.
                            </t>
                        </t>
                        <t t-if="diffDays &lt; 1">
                            This database has expired.
                        </t>
                        <!-- only show corrective actions to an admin (group_system) -->
                        <t t-if="warning=='admin'">
                            <t t-if="dbexpiration_reason == 'trial' or dbexpiration_reason == 'demo' or dbexpiration_reason === false">
                                <a class="oe_instance_register_show" href="#">Register your subscription</a> or <a class="oe_instance_buy" href="#">buy a subscription</a>.
                            </t>
                            <t t-if="dbexpiration_reason == 'renewal'">
                                <a class="oe_instance_renew" href="#">Renew your subscription</a>.
                            </t>
                            <t t-if="dbexpiration_reason == 'upsell'">
                                You have more users than your subscription allows.<br/>
                                <a class="oe_instance_upsell" href="#">Add more users</a>
                            </t>
                        </t>
                        <t t-if="warning=='user'">
                            Log in as an administrator to correct the issue.
                        </t>
                    </t>
                </span>
            </span>
            <span class="oe_instance_register oe_instance_success">
                Thank you, your registration was successful! Your database is valid until <span class="valid_date"/>.
            </span>
            <span class="oe_instance_register oe_instance_error">
                Something went wrong while registering your database. You can try again or contact our support at <a href='mailto:help@odoo.com' t-translation="off">help@odoo.com</a>.
            </span>
            <form class="form-inline oe_instance_register oe_instance_register_form">
                <br/>
                <div class="form-group">
                    <label for="enterprise_code">Subscription Code: </label>
                    <input type="text" class="form-control" id="enterprise_code"
                           placeholder="Paste code here"
                           title="Your subscription code"/>
                </div>
                <button class="btn btn-sm btn-primary" id="confirm_enterprise_code">Register</button>
            </form>
        </div>
    </div>
</div>

<nav t-name="Menu" class="o_main_navbar">
    <button type="button" class="fa o_menu_toggle"/>
    <button type="button" class="fa fa-bars pull-right visible-xs-block o_mobile_menu_toggle"/>

    <div class="o_menu_brand"/>
    <ul class="o_menu_sections"/>
    <ul class="o_menu_systray"/>
</nav>

<t t-name="Menu.link">
    <t t-if="!depth"><t t-set="depth" t-value="1"/></t>
    <t t-if="depth"><t t-set="depth" t-value="depth + 1"/></t>

    <li t-if="!menu.children.length">
        <a t-attf-href="#menu_id=#{menu.id}&amp;action=#{menu.action ? menu.action.split(',')[1] : ''}"
            t-att-data-menu="menu.id"
            t-att-data-action-model="menu.action ? menu.action.split(',')[0] : ''"
            t-att-data-action-id="menu.action ? menu.action.split(',')[1] : ''"
            t-att-class="'o_menu_entry_lvl_' + depth"
            data-toggle="collapse" data-target="#o_navbar_collapse.in">
            <span><t t-esc="menu.name"/></span>
        </a>
    </li>

    <li t-if="menu.children.length" role="presentation" t-att-class="'dropdown-header o_menu_header_lvl_' + depth">
        <span><t t-esc="menu.name"/></span>
        <t t-foreach="menu.children" t-as="menu">
            <t t-call="Menu.link"/>
        </t>
    </li>
</t>

<!-- separate first level dropdown from the others to avoid nested dropdown -->
<t t-name="Menu.sections">
    <t t-foreach="menu_data.children" t-as="first_level_menu">
        <section t-att-class="first_level_menu.id">
            <t t-if="first_level_menu.children.length">
                <t t-foreach="first_level_menu.children" t-as="second_level_menu">
                    <t t-if="!second_level_menu.children.length">
                        <t t-set="menu" t-value="second_level_menu"/>
                        <t t-call="Menu.link"/>
                    </t>
                    <t t-if="second_level_menu.children.length">
                        <li>
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                                <t t-esc="second_level_menu.name"/>
                            </a>
                            <ul class="dropdown-menu" role="menu">
                                <t t-foreach="second_level_menu.children" t-as="third_level_menu">
                                    <t t-set="menu" t-value="third_level_menu"/>
                                    <t t-call="Menu.link"/>
                                </t>
                            </ul>
                        </li>
                    </t>
                </t>
            </t>
        </section>
    </t>
</t>

<t t-extend="UserMenu.about">
    <t t-jquery=".user-heading h3" t-operation="replace">
        Version <t t-esc="db_info.server_version"/> (Enterprise Edition)
    </t>
</t>

<div t-name="FormRenderingStatusBar" class="o_form_statusbar">
    <div class="o_statusbar_buttons"/>
</div>

</templates>