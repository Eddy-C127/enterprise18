<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="hr_payroll_onss_restructuring" model="hr.salary.rule.category">
            <field name="name">ONSS Restructuring Reduction</field>
            <field name="code">ONSSRESTRUCTURING</field>
            <field name="parent_id" ref="hr_payroll.ALW"/>
        </record>

        <record id="cp200_employees_salary_onss_restructuring" model="hr.salary.rule">
            <field name="category_id" ref="hr_payroll_onss_restructuring"/>
            <field name="name">ONSS Restructuring Reduction</field>
            <field name="code">ONSSRESTRUCTURING</field>
            <field name="sequence">42</field>
            <field name="condition_select">python</field>
            <field name="condition_python">result=contract.l10n_be_onss_restructuring</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
result = compute_onss_restructuring(payslip, categories, worked_days, inputs)
result = min(abs(result_rules['ONSS']['total']), result)
            </field>
            <field name="struct_id" ref="l10n_be_hr_payroll.hr_payroll_structure_cp200_employee_salary"/>
        </record>

        <record id="l10n_be_hr_payroll.cp200_employees_salary_employment_bonus_employees" model="hr.salary.rule">
            <field name="sequence">43</field>
            <field name="amount_python_compute">
result = compute_employment_bonus_employees(payslip, categories, worked_days, inputs)
onss = result_rules['ONSS']['total'] + result_rules['ONSSRESTRUCTURING']['total']
result = min(abs(onss), result)
            </field>
        </record>

        <record id="l10n_be_hr_payroll.cp200_employees_salary_onss_total" model="hr.salary.rule">
            <field name="amount_python_compute">
result = abs(categories.ONSS) - abs(categories.ONSSRESTRUCTURING) - abs(categories.EmpBonus)
            </field>
        </record>
    </data>
</odoo>
