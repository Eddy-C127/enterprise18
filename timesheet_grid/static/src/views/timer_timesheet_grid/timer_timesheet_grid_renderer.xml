<?xml version="1.0" encoding="utf-8"?>
<templates>
    <t t-name="timesheet_grid.new_TimerGridRenderer" t-inherit="web_grid.new_Renderer" owl="1">
        <xpath expr="//t[@t-call='web_grid.new_Header']" position="attributes">
            <attribute name="t-call">timesheet_grid.new_TimerGridHeader</attribute>
        </xpath>
        <xpath expr="//t[@t-call='web_grid.new_Section']" position="attributes">
            <attribute name="t-call">timesheet_grid.new_TimerGridSection</attribute>
        </xpath>
        <xpath expr="//t[@t-foreach='virtualRows']" position="before">
            <t t-set="buttonTimerIndex" t-value="0"/>
        </xpath>
        <xpath expr="//t[@t-call='web_grid.new_Row']" position="attributes">
            <attribute name="t-call">timesheet_grid.new_TimerGridRow</attribute>
        </xpath>
        <xpath expr="//t[@t-call='web_grid.new_AddLine']" position="attributes">
            <attribute name="t-call">timesheet_grid.new_TimerGridAddLine</attribute>
        </xpath>
        <xpath expr="//t[@t-call='web_grid.new_Footer']" position="attributes">
            <attribute name="t-call">timesheet_grid.new_TimerGridFooter</attribute>
        </xpath>
    </t>

    <t t-name="timesheet_grid.new_TimerGridHeader" t-inherit="web_grid.new_Header" owl="1">
        <xpath expr="//div[hasclass('o_grid_column_title')]" position="before">
            <div t-if="showTimerButton"
                 class="o_grid_column_timer_button bg-white border-bottom"
                 t-attf-style="grid-row: {{rowsGap}}; grid-column: 1;"
            />
        </xpath>
    </t>

    <t t-name="timesheet_grid.new_TimerGridSection" t-inherit="web_grid.new_Section" owl="1">
        <xpath expr="//t[@t-if='!section.isFake']/div" position="before">
            <div t-if="showTimerButton"
                 class="o_grid_section o_grid_section_timer_button"
                 t-attf-style="grid-row: {{row_index + 1 + rowsGap + section_index}}; grid-column: 1;"
            />
        </xpath>
    </t>

    <t t-name="timesheet_grid.new_TimerGridRow" t-inherit="web_grid.new_Row" owl="1">
        <xpath expr="//div[@name='row']" position="before">
            <div t-if="showTimerButton"
                class="o_grid_row_timer o_grid_highlightable d-flex align-items-center ps-3 py-1 transition-base"
                t-att-class="{
                    'bg-white-50' : isEven and !highlightedState[`row-${row.id}`],
                    'bg-200 bg-opacity-25' : highlightedState[`row-${row.id}`],
                 }"
                t-att-data-state-highlight-triggers="`row-${row.id},timer-${row.id}`"
                t-attf-style="grid-row: {{row_index + 1 + rowsGap + section_index}}; grid-column: 1;"
            >
                <GridTimerButtonCell
                    row="row"
                    index="buttonTimerIndex++"
                    addTimeMode="timerState.addTimeMode"
                    hovered="highlightedState[`timer-${row.id}`]"
                    timerRunning="timerState.timerRunningRowId === row.id"
                    onTimerClick.bind="onTimerClick"
                />
            </div>
        </xpath>
    </t>

    <t t-name="timesheet_grid.new_TimerGridAddLine" t-inherit="web_grid.new_AddLine" owl="1">
        <xpath expr="//div[@t-if='props.createInline']" position="before">
            <div t-if="showTimerButton"
                 t-attf-style="grid-row: {{row_index + 2 + rowsGap + section_index}}; grid-column: 1;"
            />
        </xpath>
    </t>

    <t t-name="timesheet_grid.new_TimerGridFooter" t-inherit="web_grid.new_Footer" owl="1">
        <xpath expr="//t/div" position="before">
            <div t-if="showTimerButton"
                 class="bg-white"
                 t-attf-style="grid-row: {{virtualRows.length + 1 + rowsGap + section_index + 1}}; grid-column: 1;"
            />
        </xpath>
        <xpath expr="//div[hasclass('o_grid_bar_chart_total_title')]" position="inside">
            <span t-if="column.grandTotal > column.model.data.workingHours.daily[column.value]"
                   class="o_grid_bar_chart_overtime fw-bolder text-warning"
                   title="Daily overtime"> <t t-esc="formatDailyOvertime(column)"/></span>
        </xpath>
    </t>
</templates>
