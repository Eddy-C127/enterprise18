<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="timesheet_grid.TimesheetTimerHeader" owl="1">
        <div class="timesheet-timer position-relative d-md-flex align-items-center py-2 border-bottom bg-view"
            t-att-class="props.className"
            t-on-timer-started="props.onTimerStarted"
            t-on-timer-stopped="props.onTimerStopped"
            t-on-timer-unlink="props.onTimerUnlinked"
        >
            <t t-if="_timerIsRunning">
                <div class="position-sticky start-0 d-md-flex vw-100 px-3">
                    <div class="d-flex align-items-center w-md-25">
                        <button class="btn btn-primary btn_stop_timer" name="stop_timer" t-on-click.stop="_onClickStopTimer" data-hotkey="x" t-ref="stopButton">
                            <i class="fa fa-stop me-2"></i> Stop
                        </button>
                        <div class="o_timer_discard">
                            <button class="btn btn-muted stop-timer" t-on-click.stop="_onClickUnlinkTimer" title="Press Esc to discard">Discard</button>
                        </div>
                        <div name="display_timer" class="ms-auto mx-md-auto fs-4 fw-bold">
                            <TimesheetDisplayTimer
                                t-if="props.timesheet"
                                record="props.timesheet"
                                name="'unit_amount'"
                                timerRunning="true"
                                displayRed="false"
                                readonly="true"
                                timerService="props.timerService"
                            />
                        </div>
                    </div>
                    <div t-if="_headerReadonly" class="input_m2o flex-fill p-md-2 px-0">
                        <span class="px-2">
                            A timer is running in another company.
                        </span>
                    </div>
                    <div t-elif="props.timesheet" class="input_m2o d-flex flex-column flex-md-row flex-grow-1" t-on-keydown="_onKeyDown">
                        <Field
                            name="'project_id'"
                            class="'flex-grow-1 mt-3 mt-md-0 px-md-2'"
                            record="props.timesheet"
                            attrs="props.fields['project_id'].attrs"
                            placeholder="props.fields['project_id'].placeholder"
                            canCreateEdit="false"
                        />
                        <Field
                            name="'task_id'"
                            class="'flex-grow-1 mt-3 mt-md-0 px-md-2'"
                            record="props.timesheet"
                            attrs="props.fields['task_id'].attrs"
                            placeholder="props.fields['task_id'].placeholder"
                            canCreateEdit="false"
                        />
                        <Field
                            name="'name'"
                            class="'flex-grow-1 mt-3 mt-md-0 px-md-2'"
                            record="props.timesheet"
                            attrs="props.fields['name'].attrs"
                            placeholder="props.fields['name'].placeholder"
                        />
                    </div>    
                </div>
            </t>
            <t t-else="">
                <div class="position-md-sticky start-0 d-flex align-items-center ps-3">
                    <button class="btn_start_timer btn btn-primary text-uppercase" t-on-click.stop="_onClickStartTimer" t-ref="startButton">
                        <i class="fa fa-play me-2"></i> Start
                    </button>
                    <div class="ms-3">
                        <t t-if="!isMobile">
                            <div>
                                <span class="text-muted">Press</span> <b>Enter</b> <span class="text-muted">or [a] to launch the timer</span>
                            </div>
                            <div>
                                <span class="text-muted">Press</span> <b>Shift</b> <span class="text-muted">+ [A] to add <t t-esc="props.stepTimer"/> min</span>
                            </div>
                        </t>
                        <t t-else=""> <span class="text-muted">Press </span><i class="fa fa-play mx-2"></i> <span class="text-muted">to start the timer</span></t>
                    </div>
                </div>
            </t>
        </div>
    </t>

</templates>
