<?xml version="1.0" encoding="utf-8"?>
<templates>

<t t-name="web_studio.AppCreator" owl="1">
    <div class="o_web_studio_app_creator h-100 overflow-auto">
        <div t-if="state.step !== 'model_configuration'" class="o_web_studio_app_creator_box">
            <div t-attf-class="o_web_studio_app_creator_left">
                <div class="o_web_studio_app_creator_left_content">
                    <t t-if="state.step === 'welcome'">
                        <h2 class="mb0 o_web_studio_welcome">Welcome to</h2>
                        <h1 class="mt8">Odoo Studio</h1>
                        <h5 class="text-muted">The fastest way to create a web application.</h5>
                    </t>
                    <t t-elif="state.step === 'app'">
                        <h3 class="mb32">Create your App</h3>
                        <div class="o_web_studio_app_creator_name" t-att-class="{ o_web_studio_app_creator_field_warning: !state.isFieldValid('appName') }">
                            <label for="appName">Choose an app name</label>
                            <input type="text" class="o_input"
                                name="appName"
                                placeholder="e.g. Real Estate"
                                t-model="state.data.appName"
                                t-on-input="() => state.validateField('appName')"
                                t-ref="autofocus"
                            />
                        </div>
                    </t>
                    <t t-elif="state.step === 'model'">
                        <h3 class="mb32">Create your first Menu</h3>
                        <div class="o_web_studio_app_creator_menu" t-att-class="{ o_web_studio_app_creator_field_warning: !state.isFieldValid('menuName') }">
                            <label for="menuName">Choose your first object name</label>
                            <input type="text" class="o_input"
                                name="menuName"
                                placeholder="e.g. Properties"
                                t-model="state.data.menuName"
                                t-on-input="() => state.validateField('menuName')"
                                t-ref="autofocus"
                            />
                        </div>
                        <div class="o_web_studio_app_creator_model_choice">
                            <div t-foreach="state.fieldsInfo.modelChoice.selection" t-as="item" t-key="item[0]" class="form-check">
                                <t t-set="inputId" t-value="'model_choice_' + item[0]" />
                                <input type="radio"
                                    class="form-check-input"
                                    name="model_choice"
                                    t-att-id="inputId"
                                    t-model="state.data.modelChoice"
                                    t-att-value="item[0]"
                                />
                                <label class="form-check-label" t-att-for="inputId" t-esc="item[1]" />
                            </div>
                        </div>
                        <div
                            t-if="state.data.modelChoice === 'existing'" class="o_web_studio_app_creator_model mt8"
                            t-att-class="{ o_web_studio_app_creator_field_warning: !state.isFieldValid('modelId') }"
                        >
                            <label for="name">Model</label>
                            <t t-set="activeFields" t-value="{ modelId: state.fieldsInfo.modelId }" />
                            <Record
                                fields="activeFields"
                                activeFields="activeFields"
                                values="{ modelId: state.data.modelId }"
                                onRecordChanged="(rec) => { state.data.modelId = rec.data.modelId; state.validateField('modelId'); }"
                                t-slot-scope="data">
                                <t t-set="record" t-value="data.record" />
                                <Many2OneField
                                    record="record"
                                    name="'modelId'"
                                    relation="activeFields.modelId.relation"
                                    value="record.data.modelId"
                                    update="(value) => record.update({ modelId: value })"
                                    canQuickCreate="true"
                                    openTarget="'new'"
                                />
                            </Record>
                        </div>
                    </t>
                </div>
                <div class="o_web_studio_app_creator_buttons">
                    <button t-if="state.hasPrevious" type="button"
                        class="btn fa fa-chevron-left o_web_studio_app_creator_previous"
                        aria-label="Previous"
                        title="Previous"
                        t-on-click="() => this.state.previous()"
                    />
                    <t t-set="nextStep" t-value="state.nextStep" />
                    <button type="button"
                        class="btn o_web_studio_app_creator_next"
                        aria-label="Next"
                        title="Next"
                        t-att-class="{ is_ready: nextStep !== false }"
                        t-on-click="() => this.state.next()"
                        >
                        <span t-if="nextStep !== false">
                            <t t-if="nextStep">Next</t>
                            <t t-else="">Create your app</t>
                        </span>
                        <i class="fa fa-chevron-right"/>
                    </button>
                </div>
            </div>
            <div class="o_web_studio_app_creator_right" t-if="state.step !== 'model_configuration'">
                <div class="o_web_studio_app_creator_right_content">
                    <t t-if="state.step === 'welcome'">
                        <img class="o_web_studio_welcome_image" src="/web_studio/static/src/img/studio_app_icon.png"/>
                    </t>
                    <IconCreator t-else=""
                        t-props="state.data.iconData" 
                        editable="state.step === 'app'"
                        onIconChange.bind="(iconData) => this.state.data.iconData = iconData"
                    />
                </div>
            </div>
        </div>
        <ModelConfigurator
            t-if="state.step === 'model_configuration'"
            label="'Create your app'"
            onConfirmOptions.bind="onConfirmOptions"
            onPrevious="() => this.state.previous()"
        />
    </div>
</t>

</templates>
