<?xml version="1.0" encoding="UTF-8"?>
<templates>
    <!--
        This template is the ribbon at the top of the helpdesk dashboard that adds
        some figures to it. We call this rubbon the "HelpdeskDashboard".
    -->
    <t t-name="helpdesk.HelpdeskDashboard">
        <div t-if="widget.show_demo or widget.values" class="o_helpdesk_banner py-4">
            <div>
                <!-- Fake Data for Demo-->
                <t t-set="demo_class" t-value="' '"/>
                <t t-if="widget.show_demo" >
                    <div class="ribbon ribbon-top-right">
                        <span class="o_recruitment_purple">Sample</span>
                    </div>
                    <t t-set="demo_class" t-value="' o_demo o_cursor_default '"/>

                    <t t-set="widget.values['my_all']['count']" t-value="10"/>
                    <t t-set="widget.values['my_high']['count']" t-value="3"/>
                    <t t-set="widget.values['my_urgent']['count']" t-value="2"/>

                    <t t-set="widget.values['my_all']['hours']" t-value="30"/>
                    <t t-set="widget.values['my_high']['hours']" t-value="10"/>
                    <t t-set="widget.values['my_urgent']['hours']" t-value="15"/>

                    <t t-set="widget.values['my_all']['failed']" t-value="4"/>
                    <t t-set="widget.values['my_high']['failed']" t-value="2"/>
                    <t t-set="widget.values['my_urgent']['failed']" t-value="1"/>

                    <t t-set="widget.values['today']['count']" t-value="1"/>
                    <t t-set="widget.values['today']['rating']" t-value="50"/>
                    <t t-set="widget.values['today']['success']" t-value="50"/>

                    <t t-set="widget.values['7days']['count']" t-value="15"/>
                    <t t-set="widget.values['7days']['rating']" t-value="70"/>
                    <t t-set="widget.values['7days']['success']" t-value="80"/>

                    <t t-set="widget.values['helpdesk_target_rating']" t-value="80"/>
                    <t t-set="widget.values['helpdesk_target_success']" t-value="85"/>
                    <t t-set="widget.values['helpdesk_target_closed']" t-value="85"/>
                </t>

                <table class="table table-sm">
                    <tr>
                        <td class="o_text">
                            <div class="o_highlight">My Tickets</div>
                            Open Tickets
                        </td>
                        <td t-attf-class="{{demo_class}} {{widget.values['my_all']['count'] > 0 ? 'o_main': 'o_secondary'}} o_dashboard_action" title="My Tickets" name="helpdesk.helpdesk_my_ticket_action_no_create" t-attr-show_demo="{{widget.show_demo}}" data-hotkey="t">
                            <a t-att-class="demo_class != ' ' ? 'o_cursor_default' : ''" href="#">
                                <span class="o_highlight"><t t-esc="widget.values['my_all']['count']"/></span><br/>
                                Tickets
                            </a>
                        </td>
                        <td t-attf-class="{{demo_class}} {{widget.values['my_high']['count'] > 0 ? 'o_main': 'o_secondary'}} o_dashboard_action" title="My Tickets" name="helpdesk.helpdesk_my_ticket_action_no_create" context="{'search_default_high_priority': True}" t-attr-show_demo="{{widget.show_demo}}" data-hotkey="p">
                            <a t-att-class="demo_class != ' ' ? 'o_cursor_default' : ''" href="#">
                                <span class="o_highlight"><t t-esc="widget.values['my_high']['count']"/></span><br/>
                                High Priority (<span title="Two stars, with a maximum of three" role="img" aria-label="Two stars, with a maximum of three"><span class="fa fa-star" style="color: gold"/><span class="fa fa-star" style="color: gold"/></span>)
                            </a>
                        </td>
                        <td t-attf-class="{{demo_class}} {{widget.values['my_urgent']['count'] > 0 ? 'o_main': 'o_secondary'}} o_dashboard_action" title="My Tickets" name="helpdesk.helpdesk_my_ticket_action_no_create" context="{'search_default_urgent_priority': True}" t-attr-show_demo="{{widget.show_demo}}" data-hotkey="u">
                            <a t-att-class="demo_class != ' ' ? 'o_cursor_default' : ''" href="#">
                                <span class="o_highlight"><t t-esc="widget.values['my_urgent']['count']"/></span><br/>
                                Urgent (<span title="Three stars, maximum score" role="img" aria-label="Three stars, maximum score"><span class="fa fa-star" style="color: gold"/><span class="fa fa-star" style="color: gold"/><span class="fa fa-star" style="color: gold"/></span>)
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td class="o_text">Avg Open Hours</td>
                        <td title="Tickets Analysis"  t-att-class="demo_class + ' o_secondary o_dashboard_action'" name="helpdesk.helpdesk_ticket_action_dashboard" t-attr-show_demo="{{widget.show_demo}}" data-hotkey="a">
                            <a t-att-class="demo_class != ' ' ? 'o_cursor_default' : ''" href="#"><t t-esc="widget._format_time(widget.values['my_all']['hours'])"/></a>
                        </td>
                        <td title="Tickets Analysis" t-att-class="demo_class + ' o_secondary o_dashboard_action'" name="helpdesk.helpdesk_ticket_action_dashboard" context="{'search_default_high_priority': True}" t-attr-show_demo="{{widget.show_demo}}" data-hotkey="b">
                            <a t-att-class="demo_class != ' ' ? 'o_cursor_default' : ''" href="#">
                                <t t-esc="widget._format_time(widget.values['my_high']['hours'])"/>
                            </a>
                        </td>
                        <td title="Tickets Analysis" t-att-class="demo_class + ' o_secondary o_dashboard_action'" name="helpdesk.helpdesk_ticket_action_dashboard" context="{'search_default_urgent_priority': True}" t-attr-show_demo="{{widget.show_demo}}" data-hotkey="y">
                            <a t-att-class="demo_class != ' ' ? 'o_cursor_default' : ''" href="#">
                                <t t-esc="widget._format_time(widget.values['my_urgent']['hours'])"/>
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td class="o_text" t-if="widget.success_rate_enable">Failed Tickets</td>
                        <td t-if="widget.success_rate_enable" t-att-class="demo_class + (widget.values['my_all']['failed'] ? 'o_warning' : 'o_secondary') + ' o_dashboard_action'" name="helpdesk.helpdesk_ticket_action_sla" title="My Tickets" t-attr-show_demo="{{widget.show_demo}}" data-hotkey="d">
                            <a t-att-class="demo_class != ' ' ? 'o_cursor_default' : ''" href="#" class="o_dashboard_action" name="helpdesk.helpdesk_ticket_action_sla" data-extra="overdue" t-attr-show_demo="{{widget.show_demo}}">
                                <t t-esc="widget.values['my_all']['failed']"/>
                            </a>
                        </td>
                        <td t-if="widget.success_rate_enable" t-att-class="demo_class + (widget.values['my_high']['failed'] ? 'o_warning' : 'o_secondary') + ' o_dashboard_action'" name="helpdesk.helpdesk_ticket_action_sla" title="My Tickets" context="{'search_default_high_priority': True}" t-attr-show_demo="{{widget.show_demo}}" data-hotkey="e">
                            <a t-att-class="demo_class != ' ' ? 'o_cursor_default' : ''" href="#" data-extra="overdue">
                                <t t-esc="widget.values['my_high']['failed']"/>
                            </a>
                        </td>
                        <td t-if="widget.success_rate_enable" t-att-class="demo_class + (widget.values['my_urgent']['failed'] ? 'o_warning' : 'o_secondary') + ' o_dashboard_action'" name="helpdesk.helpdesk_ticket_action_sla" title="My Tickets" context="{'search_default_urgent_priority': True}" t-attr-show_demo="{{widget.show_demo}}" data-hotkey="f">
                            <a t-att-class="demo_class != ' ' ? 'o_cursor_default' : ''" href="#" data-extra="overdue">
                                <t t-esc="widget.values['my_urgent']['failed']"/>
                            </a>
                        </td>
                    </tr>
                </table>

            </div><div>
                <table class="table table-sm">
                    <tr>
                        <td class="o_text">
                            <div class="o_highlight">My Performance</div>
                            Today
                        </td>
                        <td title="My Tickets"
                            t-attf-class="o_dashboard_action {{demo_class}} {{widget.values and widget.values['helpdesk_target_closed'] and widget.values['today']['count'] >= widget.values['helpdesk_target_closed'] ? 'o_main': 'o_secondary'}} {{!widget.success_rate_enable and !widget.rating_enable ? 'w-50': ''}}"
                            name="helpdesk.helpdesk_ticket_action_close_analysis"
                            t-attr-show_demo="{{widget.show_demo}}" data-hotkey="i">
                            <a t-att-class="demo_class != ' ' ? 'o_cursor_default' : ''" href="#">
                                <span class="o_highlight">
                                    <t t-esc="widget.values['today']['count']"/>
                                </span><br/>
                                Closed Tickets
                            </a>
                        </td>
                        <td t-if="widget.success_rate_enable"
                            title="Percentage of tickets that were closed without failing any SLAs."
                            data-action-title="My Tickets"
                            t-att-class="'o_dashboard_action ' + demo_class + ((widget.values and widget.values['helpdesk_target_success'] and widget.values['helpdesk_target_success'] &lt;= widget.values['today']['success'])?'o_main':'o_secondary')"
                            name="helpdesk.helpdesk_ticket_action_success"
                            t-attr-show_demo="{{widget.show_demo}}" data-hotkey="k">
                            <a t-att-class="demo_class != ' ' ? 'o_cursor_default' : ''" href="#">
                                <span class="o_highlight">
                                    <t t-esc="widget._format_float(widget.values['today']['success'])"/>%
                                </span><br/>
                                Success Rate
                            </a>
                        </td>
                        <td t-if="widget.rating_enable"
                            title="Today Average Rating"
                            t-att-class="'o_dashboard_action ' + demo_class + ((widget.values and widget.values['helpdesk_target_rating'] and widget.values['helpdesk_target_rating'] &lt;= widget.values['today']['rating'])?'o_main':'o_secondary')"
                            name="action_view_rating_today"
                            type="object"
                            t-attr-show_demo="{{widget.show_demo}}" data-hotkey="j">
                            <a t-att-class="demo_class != ' ' ? 'o_cursor_default' : ''" href="#">
                                <span class="o_highlight">
                                    <t t-esc="widget._format_float(widget.values['today']['rating'])"/> %
                                </span><br/>
                                Average Rating
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td class="o_text">Avg Last 7 days</td>
                        <td title="Tickets Analysis" t-attf-class="{{demo_class}} {{!widget.success_rate_enable and !widget.rating_enable ? 'w-50': ''}} o_secondary o_dashboard_action" name="helpdesk.helpdesk_ticket_action_7days_analysis" t-attr-show_demo="{{widget.show_demo}}" data-hotkey="l">
                            <a t-att-class="demo_class != ' ' ? 'o_cursor_default' : ''" href="#">
                                <t t-esc="widget.values['7days']['count']"/>
                            </a>
                        </td>
                        <td t-if="widget.success_rate_enable" data-action-title="Tickets Analysis" title="Percentage of tickets that were closed without failing any SLAs." t-att-class="demo_class + 'o_secondary o_dashboard_action'" name="helpdesk.helpdesk_ticket_action_7dayssuccess" t-attr-show_demo="{{widget.show_demo}}" data-hotkey="n">
                            <a t-att-class="demo_class != ' ' ? 'o_cursor_default' : ''" href="#">
                                <t t-esc="widget._format_float(widget.values['7days']['success'])"/>%
                            </a>
                        </td>
                        <td t-if="widget.rating_enable" title="Avg 7 Days Customer Satisfaction" t-att-class="demo_class + 'o_secondary o_dashboard_action'" name="action_view_rating_7days" t-attr-show_demo="{{widget.show_demo}}" data-hotkey="m">
                            <a t-att-class="demo_class != ' ' ? 'o_cursor_default' : ''" href="#">
                                <t t-esc="widget._format_float(widget.values['7days']['rating'])"/>%
                            </a>
                        </td>
                    </tr><tr>
                        <td class="o_text">Daily Target</td>
                        <td t-att-class="demo_class + 'o_secondary'">
                            <span t-attf-class="{{widget.show_demo ? '' : 'o_target_to_set'}} {{!widget.success_rate_enable and !widget.rating_enable ? 'w-50': ''}}" name='helpdesk_target_closed' t-att-value="widget.values['helpdesk_target_closed'] ? widget.values['helpdesk_target_closed'] : undefined" t-att-title=" widget.show_demo ? 'Tickets closed daily target' : 'Click to set'" data-hotkey="v">
                                <div t-if="widget.values['helpdesk_target_closed']" class="pl-4">
                                    <t t-esc="widget.values['helpdesk_target_closed']"/>
                                    <i class="fa fa-pencil ml-1"/>
                                </div>
                                <div t-else="">
                                    Click to set
                                </div>
                            </span>
                        </td>
                        <td t-att-class="demo_class + 'o_secondary'" t-if="widget.success_rate_enable">
                            <span t-att-class="(widget.show_demo ? '' : 'o_target_to_set')" name='helpdesk_target_success' t-att-value="widget.values['helpdesk_target_success'] ? widget._format_float(widget.values['helpdesk_target_success']) : undefined" t-att-title="widget.show_demo ? 'Success rate daily target' : 'Click to set'" data-hotkey="x">
                                <div t-if="widget.values['helpdesk_target_success']" class="pl-4">
                                    <t t-esc="widget._format_float(widget.values['helpdesk_target_success'])"/>%
                                    <i class="fa fa-pencil ml-1"/>
                                </div>
                                <div t-else="">
                                    Click to set
                                </div>
                            </span>
                        </td>
                        <td t-att-class="demo_class + 'o_secondary'" t-if="widget.rating_enable">
                            <span t-att-class="(widget.show_demo ? '' : 'o_target_to_set')" name='helpdesk_target_rating' t-att-value="widget.values['helpdesk_target_rating'] ? widget._format_float(widget.values['helpdesk_target_rating']) : undefined" t-att-title=" widget.show_demo ? 'Average rating daily target' : 'Click to set'" data-hotkey="w">
                                <div t-if="widget.values['helpdesk_target_rating']" class="pl-4">
                                    <t t-esc="widget._format_float(widget.values['helpdesk_target_rating'])"/>%
                                    <i class="fa fa-pencil ml-1"/>
                                </div>
                                <div t-else="">
                                    Click to set
                                </div>
                            </span>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </t>
</templates>
