<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-inherit="mrp_workorder.overviewButtonsKanban" t-inherit-mode="extension">
        <xpath expr="//button[hasclass('o_back_button')]" position="after">
            <button t-if="workcenter.allow_employee" t-on-click="openEmployeeSelection" class="btn btn-secondary o_lock_employee">
                <span t-if="employees_connected.logged.length==0">Log In</span>
                <AvatarList employees="employees_connected" visibleAvatarCount="3"/>
            </button>
            <button class="btn-secondary btn-link o_unblock" type="workorder_event" name="popupEmployeeManagementg">
                <field name="employees_ids" widget="kanban.many2many_avatar_employee"/>
            </button>
        </xpath>
        <xpath expr="//div[last()]" position="after">
            <div t-if="popup['SelectionPopup'].isShown" class="o_tablet_popups">
                <SelectionPopup popupData="popup['SelectionPopup'].data" onClosePopup.bind="closePopup" onSelectEmployee.bind="selectEmployee"/>
            </div>
            <div t-if="popup['PinPopup'].isShown" class="o_tablet_popups">
                <PinPopup popupData="popup['PinPopup'].data" onClosePopup.bind="closePopup" onPinValidate.bind="selectEmployee"/>
            </div>
        </xpath>
    </t>

    <t t-inherit="mrp_workorder.overviewButtonsList" t-inherit-mode="extension" owl="1">
        <xpath expr="//div/*" position="after">
            <button t-on-click="openEmployeeSelection" class="btn btn-secondary o_lock_employee">
                <span t-if="employees_connected.logged.length>1 or (!sessionAdmin.path and employees_connected.logged.length!=0)" class="o_workorder_icon_btn fa fa-bars" style="padding:5px" ></span>
                <t t-if="!(sessionAdmin.path and employees_connected.logged.length!=0)">
                    <span style="padding-left:5px">Log In</span>
                </t>
                <t t-else="">
                    <img t-attf-src="{{sessionAdmin.path}}" class="rounded-circle o_avatar_connected" style="margin-left:5px" />
                    <span t-esc="sessionAdmin.name" style="padding-left:5px; vertical-align:middle" readonly="1"></span>
                </t>
            </button>
            <button t-on-click="disconnectAdmin" t-if="sessionAdmin.path and employees_connected.logged.length!=0" class="btn btn-outline-primary o_lock_employee">
                <span >LOG OUT</span>
            </button>
        </xpath>
        <xpath expr="//div[last()]" position="after">
            <div t-if="popup['SelectionPopup'].isShown" class="o_tablet_popups">
                <SelectionPopup popupData="popup['SelectionPopup'].data" onClosePopup.bind="closePopup" onSelectEmployee.bind="selectEmployee"/>
            </div>
            <div t-if="popup['PinPopup'].isShown" class="o_tablet_popups">
                <PinPopup popupData="popup['PinPopup'].data" onClosePopup.bind="closePopup" onPinValidate.bind="selectEmployee"/>
            </div>
            <div t-if="popup['WorkingEmployeePopupWOList'].isShown" class="o_tablet_popups">
                <WorkingEmployeePopupWOList 
                    popupData="popup['WorkingEmployeePopupWOList'].data"
                    onClosePopup.bind="closePopup"
                    onAddEmployee.bind="popupAddEmployee"
                    onStopEmployee.bind="stopEmployee"
                    onStartEmployee.bind="startEmployee"
                    becomeAdmin.bind="setSessionOwner"
                />
            </div>
        </xpath>
    </t>
</templates>
